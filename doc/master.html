<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Polylith Architecture</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book">
<div id="header">
<h1>Polylith Architecture</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/logo.png" alt="logo" width="400">
</div>
</div>
<div class="paragraph">
<p><a href="https://cljdoc.org/d/polylith/clj-poly/0.2.20/doc/readme"><span class="image"><img src="https://badgen.net/badge/doc/0.2.20/blue" alt="blue"></span></a>
<a href="https://cljdoc.org/d/polylith/clj-poly/0.3.21-SNAPSHOT"><span class="image"><img src="https://badgen.net/badge/doc/0.3.21-SNAPSHOT%20%232/cyan" alt="cyan"></span></a>
<a href="https://clojurians.slack.com/messages/C013B7MQHJQ"><span class="image"><img src="https://badgen.net/badge/slack/join%20chat/green" alt="green"></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_welcome_to_the_wonderful_world_of_polylith_for_clojure">Welcome to the wonderful world of Polylith for Clojure!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Polylith is made by developers for developers.
Our goal is to maximize productivity and increase the quality of the systems we create.
Although Polylith is not a build tool, it integrates into your build pipeline.</p>
</div>
<div class="paragraph">
<p>Polylith, as a concept, is documented <a href="https://polylith.gitbook.io/polylith">here</a>.</p>
</div>
<div class="paragraph">
<p>The documentation you are reading now describes the Polylith tool built for <a href="https://clojure.org/">Clojure</a>, a powerful and simple functional language for the <a href="https://en.wikipedia.org/wiki/Java_virtual_machine">JVM</a>.</p>
</div>
<div class="paragraph">
<p>Polylith introduces the architectural concept of “service level building blocks” which can be combined like LEGO® bricks to build our services and systems.
Polylith’s LEGO-like bricks are easy to reason about, test, refactor, and reuse.
They allow us to work with all our code in one place for maximum productivity, from a single <a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a>.</p>
</div>
<div class="paragraph">
<p>We can easily assemble our Polylith bricks into different kinds of deployable artifacts, like services and tools, in the same way we put together LEGO® when we were kids!
Not surprisingly, it&#8217;s just as simple and fun!</p>
</div>
<div class="paragraph">
<p>To better understand the principles and ideas behind this tool, we recommend you first read about <a href="https://polylith.gitbook.io/polylith">Polylith as a concept</a>.
At the very least, read <a href="https://polylith.gitbook.io/polylith/introduction/polylith-in-a-nutshell">Polylith in a Nutshell</a>, where concepts like interface, component, base, brick, project, and workspace are introduced.</p>
</div>
<div class="paragraph">
<p>You can then dig into the Clojure Polylith tool <a href="https://cljdoc.org/d/polylith/clj-poly/CURRENT/doc/introduction">introduction</a>.</p>
</div>
<div class="paragraph">
<p>Enjoy the ride!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sponsor_polylith">Sponsor Polylith</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please <a href="https://github.com/sponsors/polyfy">sponsor</a> the important work of Polylith! ❤️</p>
</div>
<div class="paragraph">
<p>Iron, Bronze, Silver, Gold, and Platinum sponsors are also listed and on the <a href="https://polylith.gitbook.io/polylith">front page</a> of the Polylith docs.</p>
</div>
<div class="sect2">
<h3 id="_bronze_sponsors">Bronze Sponsors</h3>
<div class="imageblock">
<div class="content">
<a class="image" href="https://www.scrintal.com"><img src="images/sponsors/scrintal.png" alt="scrintal.com" width="200"></a>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_iron_sponsors">Iron Sponsors</h3>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://www.adgoji.com"><img src="images/sponsors/adgoji.png" alt="adgoji.com" width="200"></a></span></p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://github.com/taehee-sp"><img src="images/sponsors/taehee-sp.png" alt="taehee sp" width="150"></a></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_polylith_fans">Polylith Fans</h3>
<div class="paragraph">
<p><span class="image left"><a class="image" href="https://github.com/yyna"><img src="https://avatars.githubusercontent.com/u/18068051" alt="Jungin Kwon" width="32"></a></span>
<span class="image left"><a class="image" href="https://github.com/fluent-development"><img src="https://avatars.githubusercontent.com/u/59614667" alt="Multiply" width="32"></a></span>
<span class="image left"><a class="image" href="https://github.com/anieri"><img src="https://avatars.githubusercontent.com/u/6353427" alt="Anieri" width="32"></a></span>
<span class="image left"><a class="image" href="https://github.com/john-shaffer"><img src="https://avatars.githubusercontent.com/u/53870456" alt="John Shaffer" width="32"></a></span>
<span class="image left"><a class="image" href="https://github.com/tlonist-sang"><img src="https://avatars.githubusercontent.com/u/47784846?v=4" alt="Sanghyun Kim" width="32"></a></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_polylith_friends">Polylith Friends</h3>
<div class="paragraph">
<p><span class="image left"><a class="image" href="https://github.com/seancorfield"><img src="https://avatars.githubusercontent.com/u/43875" alt="Sean Corfield" width="32"></a></span>
<span class="image left"><a class="image" href="https://github.com/namenu"><img src="https://avatars.githubusercontent.com/u/243097" alt="Hyunwoo Nam" width="32"></a></span>
<span class="image left"><a class="image" href="https://github.com/premiscale"><img src="https://avatars.githubusercontent.com/u/120519034?s=200&amp;v=4" alt="PremiScale" width="32"></a></span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_introduction_2">Introduction</h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
For a richer experience, we recommend reading on <a href="https://cljdoc.org/d/polylith/clj-poly/CURRENT/doc/introduction">cljdoc</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This documentation is a practical guide to the <code>poly</code> tool.</p>
</div>
<div class="paragraph">
<p>We include many code examples.
They act as an ongoing tutorial as you read sequentially through the documentation.
We encourage you to follow the tutorial examples and try them out yourself.
For your convenience, we provide the end result <a href="/examples/doc-example">here</a>.</p>
</div>
<div class="paragraph">
<p>We will guide you through the steps of creating a workspace with projects composed of components, bases, and libraries and how to work with them from the development environment and the interactive shell.</p>
</div>
<div class="paragraph">
<p>We will give a short introduction to tools.deps and how to use tools.build to create deployable artifacts.
We will explain how git is used to tag the code and how it enables us to test and release the code incrementally.</p>
</div>
<div class="paragraph">
<p>We will show how profiles will help us work from a single development environment for maximum efficiency and how dependencies and library usage can be displayed.</p>
</div>
<div class="paragraph">
<p>We will explain the value of components and how they bring context to our development experience, which will help us build decoupled and scalable systems from day one.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s begin!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install">Install</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_install_2" class="sect0">Install</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>There are two ways to install the <code>poly</code> tool:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.027%;">
<col style="width: 36.4864%;">
<col style="width: 36.4866%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">1. Stand-alone</th>
<th class="tableblock halign-left valign-top">2. <a href="#use-as-dependency">Clojure CLI dep</a></th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Example usage:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>poly help</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clojure -M:poly help</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Installed via:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Homebrew on macOS, otherwise via Nix or a manual download</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adding a <code>:poly</code> alias in <code>./deps.edn</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Can be invoked from:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Polylith <a href="#">workspace</a> directory</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Switch <code>poly</code> version via:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@&lt;version&gt;</code> if using HomeBrew</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updating dependency for <code>:poly</code> alias in <code>./deps.edn</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Pre-compiled for faster startup? <a href="#startup-time"><sup>1</sup></a></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table Notes:</p>
</div>
<div id="startup-time" class="olist arabic">
<ol class="arabic">
<li>
<p>If you follow our recommendation of using the <code>poly</code> <a href="#">shell</a>, startup time is not much of a concern.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-on-mac">Install as Stand-alone on macOS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, ensure that you have <a href="https://clojure.org/guides/getting_started">Clojure CLI</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a> installed. If you are installing git for the first time, don&#8217;t forget to configure your git <a href="https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git">user.name</a> and <a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address#setting-your-commit-email-address-in-git">user.email</a>.</p>
</div>
<div class="paragraph">
<p>To install the <code>poly</code> tool on macOS, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">brew install polyfy/polylith/poly</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>poly</code> <a href="https://github.com/polyfy/polylith/blob/master/build/resources/brew/exec">script</a> is now installed and added to the system path.
The script uses Java to launch the poly tool.</p>
</div>
<div class="paragraph">
<p>If you get an error such as "openjdk-13.0.2.jdk could not be opened&#8230;&#8203;", try:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open MacOS <code>System Preferences &gt; Security &amp; Privacy &gt; General</code>.</p>
</li>
<li>
<p>Click Allow at the bottom for <code>openjdk-13.0.2.jdk</code>.</p>
</li>
<li>
<p>Run <code>brew install polyfy/polylith/poly</code> again.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Verify the installation by running <code>poly help</code>.</p>
</div>
<div class="paragraph">
<p>You will soon create your first <a href="workspace.html">workspace</a> - for now, only <code>version</code>, <code>help</code>, <code>doc</code>, and <code>create workspace</code> commands will work.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-on-linux">Install as Stand-alone on Linux</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, ensure that you have <a href="https://clojure.org/guides/getting_started">Clojure CLI</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a> installed. If you are installing git for the first time, don&#8217;t forget to configure your git <a href="https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git">user.name</a> and <a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address#setting-your-commit-email-address-in-git">user.email</a>.</p>
</div>
<div class="paragraph">
<p>To install the <code>poly</code> tool on Linux:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the <a href="https://github.com/polyfy/polylith/releases/latest">latest release</a> of the poly jar, e.g.: <code>poly-0.2.18.jar</code>.</p>
</li>
<li>
<p>Create a directory, e.g., <code>/usr/local/polylith</code>, and copy the jar file to that directory.</p>
</li>
<li>
<p>Create a file <code>poly</code> under e.g., <code>/usr/local/bin</code> containing:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">#!/bin/sh

ARGS=""
while [ "$1" != "" ] ; do
 ARGS="$ARGS $1"
 shift
done

exec "/usr/bin/java" $JVM_OPTS "-jar" "/usr/local/polylith/poly-0.2.18.jar" $ARGS</code></pre>
</div>
</div>
</li>
<li>
<p>Make sure that:</p>
<div class="ulist">
<ul>
<li>
<p>You are referencing the correct jar file.</p>
</li>
<li>
<p>The path to <code>java</code> is correct (verify with <code>which java</code>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>If you chose <code>/usr/local/bin</code>, it is probably already on your system path.
Otherwise, adjust your system path as necessary.</p>
</li>
<li>
<p>Make <code>poly</code> executable via <code>chmod +x /usr/local/bin/poly</code> (adjust path as necessary).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Verify the installation by running <code>poly help</code>.</p>
</div>
<div class="paragraph">
<p>You will soon create your first <a href="workspace.html">workspace</a> - for now, only <code>version</code>, <code>help</code>, <code>doc</code>, and <code>create workspace</code> commands will work.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-on-windows">Install Stand-alone on Windows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, ensure that you have <a href="https://clojure.org/guides/getting_started">Clojure CLI</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a> installed. If you are installing git for the first time, don&#8217;t forget to configure your git <a href="https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git">user.name</a> and <a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address#setting-your-commit-email-address-in-git">user.email</a>.</p>
</div>
<div class="sect2">
<h3 id="_troubleshooting_clojure_cli_install_on_windows">Troubleshooting Clojure CLI Install on Windows</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you are running on Windows, you might prefer to use the more user-friendly <a href="https://github.com/casselc/clj-msi">clj-msi</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Windows users should also consider using WSL and then follow instructions under <a href="#install-on-linux">Install as Stand-alone on Linux</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have installed Clojure&#8217;s Powershell module and see an error like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">clj : The 'clj' command was found in the module 'ClojureTools', but the module could not be loaded.
For more information, run 'Import-Module ClojureTools'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;and if you followed the instruction and executed this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Import-Module ClojureTools</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;and got this error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Import-Module : File C:\Users\Admin\Documents\WindowsPowerShell\Modules\ClojureTools\ClojureTools.psm1
cannot be loaded because running scripts is disabled on this system. For more information,
see about_Execution_Policies at https:/go.microsoft.com/fwlink/?LinkID=135170.</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;then try this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_install_the_poly_tool">Install the poly tool</h3>
<div class="ulist">
<ul>
<li>
<p>Download the <a href="https://github.com/polyfy/polylith/releases/latest">latest release</a> of the poly jar, e.g., <code>poly-0.2.18.jar</code>.</p>
</li>
<li>
<p>Create a <code>Polylith</code> directory, e.g., <code>C:\Program Files\Polylith</code>, and copy the poly jar file to that directory.</p>
</li>
<li>
<p>In the same directory, create file <code>poly.bat</code> containing:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">@echo off
start /wait /b java %JAVA_OPTS% -jar "C:\Program Files\Polylith\poly-0.2.18.jar" %*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Double-check that it references the correct poly jar.</p>
</div>
</li>
<li>
<p>Add <code>C:\Program Files\Polylith</code> to the Windows <code>Path</code> environment variable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Test the installation by typing <code>poly help</code> from the command line.</p>
</div>
<div class="paragraph">
<p>You will soon create your first <a href="workspace.html">workspace</a> - for now, only <code>version</code>, <code>help</code>, <code>doc</code>, and <code>create workspace</code> commands will work.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <a href="colors.html">coloring</a> of text is not supported on Windows.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-via-nix">Install as Stand-alone via Nix</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, ensure that you have <a href="https://clojure.org/guides/getting_started">Clojure CLI</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a> installed. If you are installing git for the first time, don&#8217;t forget to configure your git <a href="https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git">user.name</a> and <a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address#setting-your-commit-email-address-in-git">user.email</a>.</p>
</div>
<div class="paragraph">
<p>The <code>poly</code> tool is installable from <a href="https://github.com/NixOS/nixpkgs/blob/master/pkgs/development/tools/misc/polylith/default.nix">nixpkgs</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">nix-shell -p polylith
# or
nix-env -iA 'nixos.polylith'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Test the installation by typing <code>poly help</code> from the command line.</p>
</div>
<div class="paragraph">
<p>You will soon create your first <a href="workspace.html">workspace</a> - for now, only <code>version</code>, <code>help</code>, <code>doc</code>, and <code>create workspace</code> commands will work.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-as-dependency">Use as Dependency</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An alternative way to run the <code>poly</code> tool is as a dependency from the <code>:poly</code> alias in your <code>./deps.edn</code> file.</p>
</div>
<div class="paragraph">
<p>First, ensure that you have <a href="https://clojure.org/guides/getting_started">Clojure CLI</a> and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a> installed. If you are installing git for the first time, don&#8217;t forget to configure your git <a href="https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git">user.name</a> and <a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address#setting-your-commit-email-address-in-git">user.email</a>.</p>
</div>
<div class="paragraph">
<p>After you have created a Polylith <a href="#">workspace</a>, you&#8217;ll notice a <code>./deps.edn</code> file was automatically generated.
It includes a <code>:poly</code> alias.
It will look something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure"> :aliases {:poly {:extra-deps {polylith/clj-poly {:mvn/version "0.2.18"}}
                  :main-opts  ["-m" "polylith.clj.core.poly-cli.core"]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Feel free to adjust the <code>:mvn/version</code> to suit your needs.
For example, you might want to try out the latest <code>SNAPSHOT</code> version.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Docs for <code>SNAPSHOT</code> releases are also available on cljdoc.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Navigate to your newly created workspace directory and verify via <code>clojure -M:poly help</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you have no interest in using any stand-alone variant of <code>poly</code> and want to use <code>poly</code> only as a dependency, see <a href="#bootstrap">Bootstrapping a Workspace</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more details on how <code>poly</code> is released, see docs on <a href="polylith-ci-setup.html#releases">releases</a>.</p>
</div>
<div class="sect2">
<h3 id="github-dependency">Using a Git Dependency</h3>
<div class="paragraph">
<p>If you wish, you can specify a git dep revision from the GitHub Polylith project.
To do so, you&#8217;d adjust your <code>./deps.edn</code> <code>:poly</code> alias to something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure"> :aliases {:poly {:extra-deps {polylith/clj-poly
                               {:git/url   "https://github.com/polyfy/polylith.git"
                                :sha       "INSERT-SHA-HERE"
                                :deps/root "projects/poly"}}
                  :main-opts  ["-m" "polylith.clj.core.poly-cli.core"]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>INSERT-SHA-HERE</code> with a commit SHA from the Polylith repository, for example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <a href="https://github.com/polyfy/polylith/commits/master">latest commit</a> from the <code>master</code> branch.
(Alternatively, you can specify the latest <code>SNAPSHOT</code> release as a maven dependency)</p>
</li>
<li>
<p>Or some commit SHA from a work-in-progress branch you want to try</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_logging_libraries">Specifying Logging Libraries</h3>
<div class="paragraph">
<p>You can add in the logging libraries you&#8217;d like to use with <code>poly</code> by adjusting your <code>:poly</code> alias in your <code>./deps.edn</code> like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure"> :aliases {:poly {:extra-deps {polylith/clj-poly {:mvn/version "{poly-version}"}
                               ;; your logging libraries here:
                               org.apache.logging.log4j/log4j-api {:mvn/version "2.20.0"}
                               org.apache.logging.log4j/log4j-slf4j-impl {:mvn/version "2.20.0"}}
                  :main-opts  ["-m" "polylith.clj.core.poly-cli.core"]}}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_as_a_library">Use as a library</h2>
<div class="sectionbody">
<div id="use-as-a-library" class="paragraph">
<p>The <code>poly</code> functionality can also be accessed as a library.
The API is documented <a href="https://cljdoc.org/d/polylith/clj-poly/CURRENT/api/polylith">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jvm-options">JVM options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You might want to specify more RAM to the <code>poly</code> tool and/or where the configuration file for logging is located.
These can be conveyed via the <code>JVM_OPTS</code> environment variable which <code>poly</code> will passes along to the Java runtime at launch of poly stand-alone.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrade">Upgrade</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_upgrade_2" class="sect0">Upgrade</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>If the <code>poly</code> tool has been <a href="#">installed</a>, it can be upgraded.</p>
</div>
<div class="paragraph">
<p>Polylith&#8217;s releases are found and described on our <a href="https://github.com/polyfy/polylith/releases">releases page</a>.
We document our release strategy in detail <a href="polylith-ci-setup.html#release">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stand_alone_macos">Stand-alone macOS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use standard brew package upgrade techniques.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">brew upgrade poly</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or, optionally, specify the tap:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">brew upgrade polyfy/polylith/poly</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stand_alone_linux">Stand-alone Linux</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the <a href="https://github.com/polyfy/polylith/releases/latest">latest release</a>, e.g. <code>poly-0.2.18.jar</code>.</p>
</li>
<li>
<p>Update the <code>poly</code> shell script you created during <a href="#install-on-linux">installation</a> to reference the new jar.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stand_alone_windows">Stand-alone Windows</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the <a href="https://github.com/polyfy/polylith/releases/latest">latest release</a>, e.g. <code>poly-0.2.18.jar</code>.</p>
</li>
<li>
<p>Update the <code>poly.bat</code> file you created during <a href="#install-on-windows">installation</a> to reference the new jar.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stand_alone_nix">Stand-alone Nix</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use standard Nix upgrade techniques.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">nix-channel --update</code></pre>
</div>
</div>
<div class="paragraph">
<p>Followed by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">nix-env -u polylith</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_as_dependency">As Dependency</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Update your <code>polylith/clj-poly</code> dependency in your <code>./deps.edn</code> to the current version.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_systems">Example systems</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_example_systems_2" class="sect0">Example Systems</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>If you are curious about what a full-blown system looks like in Polylith, look at the examples listed here.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>info</code>, <code>deps</code>, and <code>libs</code> reports on this page were generated with <a href="polyx.html">polyx</a> and its <a href="commands.html#overview">overview</a> command.
We cover <code>polyx</code> and these reports later in the documentation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_realworld">RealWorld</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><a class="image" href="images/example-systems/realworld.png"><img src="images/example-systems/realworld.png" alt="realworld"></a></span></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/furkan3ayraktar">Furkan Bayraktar</a> has made a full-blown <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app">RealWorld</a> web application, which can be compared with <a href="https://github.com/gothinkster/realworld">implementations made in other languages</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usermanager">Usermanager</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/example-systems/user-manager.png"><img src="images/example-systems/user-manager.png" alt="user manager"></a>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/seancorfield">Sean Corfield</a> has made a full-blown <a href="https://github.com/seancorfield/usermanager-example/tree/polylith">usermanager</a> web application, which can be compared with non-Polylith systems living in other branches of the repository, .</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_demo_rama_electric">Demo Rama Electric</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/example-systems/demo-rama-electric.png"><img src="images/example-systems/demo-rama-electric.png" alt="demo rama electric"></a>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/jeans11">Jean Boudet</a> has made a <a href="https://github.com/jeans11/demo-rama-electric">demo web app</a> to show the use of Rama and Electric together.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integrant-system">Integrant system</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/example-systems/integrant-system.png"><img src="images/example-systems/demo-rama-electric.png" alt="demo rama electric"></a>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/marksto">Mark Sto</a> has made a small <a href="https://github.com/polyfy/polylith/tree/master/examples/integrant-system">example system</a> to show how you can use <a href="https://github.com/weavejester/integrant">Integrant</a> in Polylith.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_game_of_life">Game of Life</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/example-systems/game-of-life.png"><img src="images/example-systems/game-of-life.png" alt="game of life"></a>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/tengstrand">Joakim Tengstrand</a> has made a small Game of life <a href="https://github.com/tengstrand/game-of-life">example app</a> to show what a tiny Polylith system can look like.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_production_systems">Production systems</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_production_systems_2" class="sect0">Production Systems</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Here, we list some companies that use Polylith in production.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>info</code>, <code>deps</code>, and <code>libs</code> reports on this page were generated with <a href="polyx.html">polyx</a> and its <a href="commands.html#overview">overview</a> command.
We cover <code>polyx</code> and these reports later in the documentation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scrintal">Scrintal</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/production-systems/scrintal.png"><img src="images/production-systems/scrintal.png" alt="scrintal"></a>
</div>
</div>
<div class="paragraph">
<p><a href="http://scrintal.com">Scrintal&#8217;s</a> first commit dates back to April 2019 and the workspace has used Polylith since day one.
Polylith enabled us to experiment fast locally and ship features easily.
The complete buy-in to Polylith paid off when we started pivoting our product at the end of 2020, as even though we are changing it to a completely new product, most bricks can be shared and reused across all our products.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_world_singles_networks">World Singles Networks</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/production-systems/world-singles-networks.png"><img src="images/production-systems/world-singles-networks.png" alt="world singles networks"></a>
</div>
</div>
<div class="paragraph">
<p>Connecting hearts all over the world.</p>
</div>
<div class="paragraph">
<p><a href="https://worldsinglesnetworks.com">World Singles Networks</a> have helped make 4.9 million human connections, on more than 100 web properties, in every country on the planet.
The entire back end of our online dating platform is built with Clojure and we&#8217;ve been using it in production for over a decade.</p>
</div>
<div class="paragraph">
<p>Our migration to Polylith started in April, 2021 and completed in December, 2022.
Our codebase is 136K lines of Clojure.
Polylith has enabled us to increase modularity, reduce coupling, improve testability,
and focus more on the importance of naming&#8201;&#8212;&#8201;making it easier to find existing code and to decide where new code should live.</p>
</div>
<div class="paragraph">
<p>The concept of "swappable implementations" for component interfaces has allowed us to more easily share code between a variety of applications that need to run in difference contexts, such as running without a database, or on older JVMs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_greenlabs">Greenlabs</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/production-systems/greenlabs.png"><img src="images/production-systems/greenlabs.png" alt="greenlabs"></a>
</div>
</div>
<div class="paragraph">
<p><a href="https://greenlabs.co.kr">Greenlabs</a> is an agtech startup located in Seoul, South Korea.</p>
</div>
<div class="paragraph">
<p>We have been using Clojure since 2020 and adopted Polylith in March 2022.
Our codebase is 93K lines of Clojure.
We have chosen an event-driven architecture for backend systems, with Kafka at the center and a bunch of AWS Lambdas around it.
Thanks to Polylith, we&#8217;ve been able to easily manage and deploy multiple serverless projects from a single repository. It&#8217;s especially helpful for modularizing code and understanding dependencies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_polylith">Polylith</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="images/production-systems/polylith.png"><img src="images/production-systems/polylith.png" alt="polylith"></a>
</div>
</div>
<div class="paragraph">
<p>Polylith is mainly developed on a non-profit basis by Joakim Tengstrand with help from Furkan Bayraktar, James Trunk, and other contributors.</p>
</div>
<div class="paragraph">
<p>The <a href="https://github.com/polyfy/polylith">polylith</a> codebase itself is structured as a Polylith workspace.
We made our initial commit on June 9, 2019.
The Polylith way of working gives us a range of benefits, such as decoupled building blocks that are easy to find, change, reuse, and reason about.
We combine these building blocks to create the <code>poly</code> and <code>polyx</code> command line tools, and the <code>clj-poly</code> library.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_your_company_here">Add your Company Here!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please get in touch with us if you use Polylith and don&#8217;t see your company here!</p>
</div>
<div class="paragraph">
<p>To be added, create an overview image with the <a href="polyx.html">polyx</a> command (from the workspace root):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">clojure -M:polyx overview out:yourcompanyname.png :no-changes</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;or export the workspace to a file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">clojure -M:poly ws out:yourcompanyname.edn :no-changes</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then email the file to joakim.tengstrand(at)gmail.com with a brief description of your experience with Polylith and a link to your company.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_workspace">Workspace</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_workspace_2" class="sect0">Workspace</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>The workspace directory is where all your code and most of your <a href="configuration.html">configuration</a> lives.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Unless otherwise noted, our examples assume <code>poly</code> is <a href="#">installed</a> as a stand-alone tool.
Adjust your command line if you&#8217;ve installed <code>poly</code> differently.</p>
</div>
<div class="paragraph">
<p>See also: <a href="#bootstrap">Bootstrapping a Workspace</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s start our <a href="#">tutorial</a> by creating an example workspace with a top namespace of <code>se.example</code> using the <a href="commands.html#create-workspace">create workspace</a> command.
By default, this command also creates a git repository, so execute it outside any existing git repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">poly create workspace name:example top-ns:se.example branch:main :commit</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>poly</code> tool has created an <code>example</code> workspace in the <code>main</code> branch of a new git repository and committed all files.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>se.example</code> top namespace is just an example.
Stick with this name when following this example, but choose whatever name makes sense when creating your own Polylith workspaces.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the <code>branch</code> parameter is not provided, the default branch will be used. You can retrieve the default branch name using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">git var GIT_DEFAULT_BRANCH</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Your workspace directory structure should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example                # Workspace dir
├── .git/              # Git repository dir
├── .gitignore         # Files and dirs git should ignore
├── .vscode/
│   └── settings.json  # Configuration for Calva
├── bases/             # Dir for poly bases
├── components/        # Dir for poly components
├── deps.edn           # Config for development project
├── development/
│   └── src/           # Development project sources
├── logo.png           # Polylith logo
├── projects/          # Dir for deployable projects
├── readme.md          # Documentation
└── workspace.edn      # Workspace config file</code></pre>
</div>
</div>
<div class="paragraph">
<p>We designed the directory structure for quick navigation and ease of use.
Your service-level building blocks are easy to find and understand, which helps you to reason about your system at a higher level.</p>
</div>
<div class="paragraph">
<p>Each top-level directory contains a specific Polylith concept:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <a href="#">base</a> is a building block that exposes a public API to the outside world, e.g., external systems and users.</p>
</li>
<li>
<p>A <a href="#">component</a> is a building block that encapsulates a specific domain or part of the system.</p>
</li>
<li>
<p>A <a href="#">project</a> specifies a deployable artifact and what components and bases it contains.</p>
</li>
<li>
<p>The <a href="#">development</a> project (<code>development/</code> + <code>deps.edn</code>) supports working on all code from one place.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure gives a consistent shape to all Polylith projects.
The familiar convention ensures that all developers, be they new or veterans, will quickly get started on Polylith systems that are new to them.
We think you will fall in love with the power and simplicity the Polylith structure gives to your projects!</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>The <code>bases</code>, <code>components</code>, and <code>projects</code> directories include a <code>.keep</code> file.
This file ensures that git tracks these otherwise empty directories.
You can delete the <code>.keep</code> files after you add other files.</p>
</div>
</div>
</div>
<div id="workspace-edn" class="paragraph">
<p>The <code>workspace.edn</code> file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">{:top-namespace "se.example"
 :interface-ns "interface"
 :default-profile-name "default"
 :compact-views #{}
 :vcs {:name "git"
       :auto-add false}
 :tag-patterns {:stable "stable-*"
                :release "v[0-9]*"}
 :projects {"development" {:alias "dev"}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>deps.edn</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">{:aliases  {:dev {:extra-paths ["development/src"] ;; <b class="conum">(1)</b>
                  :extra-deps {org.clojure/clojure {:mvn/version "1.11.1"}}}

            :test {:extra-paths []} ;; <b class="conum">(2)</b>

            :poly {:main-opts ["-m" "polylith.clj.core.poly-cli.core"] ;; <b class="conum">(3)</b>
                   :extra-deps {polyfy/clj-poly {:mvn/version "0.2.18"}}}}}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>:dev</code> alias supports your Polylith development environment</p>
</li>
<li>
<p>The <code>:test</code> alias supports your tests</p>
</li>
<li>
<p>The <code>:poly</code> alias allows you to run <code>poly</code> as a local dependency, e.g., <code>clj -M:poly version</code>, and isn&#8217;t used by <code>poly</code> stand-alone.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sub-workspaces">Existing git Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can also create a Polylith workspace inside an existing git repo.
There are two ways to do this.
Either you create the workspace directly at the root of the git repository (without giving a workspace name) by executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd my-git-repo-dir
poly create workspace top-ns:com.mycompany</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;which results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">my-git-repo-dir
├── bases
├── components
├── deps.edn
├── development
├── projects
└── workspace.edn</code></pre>
</div>
</div>
<div id="workspace-root-under-git-root" class="paragraph">
<p>&#8230;&#8203;or you create the workspace in a directory under the git repository root by executing e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd my-git-repo-dir
poly create workspace name:my-workspace top-ns:com.mycompany</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;which result in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">my-git-repo-dir
└── my-workspace
    ├── bases
    ├── components
    ├── deps.edn
    ├── development
    ├── projects
    └── workspace.edn</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In the above examples you&#8217;ll notice we ommitted the <code>:commit</code> option.
It is not supported when creating a workspace in an existing git repository.
You&#8217;ll have to commit your new workspace files yourself.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To execute a command, you need to be at the root of your workspace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd my-workspace
poly info</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bootstrap">Bootstrapping a Workspace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you don&#8217;t have a stand-alone version of <code>poly</code> <a href="#">installed</a> and prefer to use <code>poly</code> <a href="#use-as-dependency">as a dependency</a>, you can bootstrap your workspace.</p>
</div>
<div class="paragraph">
<p>All techniques above still apply, but you will instead create a workspace like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">clojure -Sdeps '{:deps {polylith/clj-poly {:mvn/version "RELEASE"}}}' \
        -M -m  polylith.clj.core.poly-cli.core \
        create workspace name:example top-ns:se.example :commit</code></pre>
</div>
</div>
<div class="paragraph">
<p>And now you can use <code>poly</code> as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd example
clojure -M:poly info</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_development">Development</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_development_2" class="sect0">Development</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>When working with a Polylith codebase, you are free to choose any editor/IDE you like, for example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.gnu.org/software/emacs/">Emacs</a> with <a href="https://cider.mx/">Cider</a></p>
</li>
<li>
<p><a href="https://code.visualstudio.com/">VSCode</a> with <a href="https://marketplace.visualstudio.com/items?itemName=betterthantomorrow.calva">Calva</a></p>
</li>
<li>
<p><a href="https://www.jetbrains.com/idea/">IntelliJ IDEA</a> with <a href="https://cursive-ide.com/">Cursive</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generic_setup">Generic Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We only currently specifically describe <a href="#idea-cursive">IntelliJ IDEA with Cursive Setup</a>.</p>
</div>
<div class="paragraph">
<p>If you are using a different IDE, here&#8217;s the generic goals:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Setup your IDE&#8217;s REPL to startup with <code>dev</code> and <code>test</code> aliases</p>
</li>
<li>
<p>Notice that your <code>./deps.edn</code> already has <code>development/src</code> on the path for the <code>dev</code> alias</p>
</li>
<li>
<p>Add sample source <code>development/src/dev/lisa.clj</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns dev.lisa)

(+ 1 2 3)</code></pre>
</div>
</div>
</li>
<li>
<p>Evaluate <code>dev.lisa</code> in your IDE REPL to test.</p>
</li>
<li>
<p>Celebrate a successful IDE setup!</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="idea-cursive">IntelliJ IDEA with Cursive Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here, we share some specific setup instructions when using Cursive.</p>
</div>
<div class="sect2">
<h3 id="_cursive_setup">Cursive Setup</h3>
<div class="paragraph">
<p>First, make sure you have <a href="https://cursive-ide.com/userguide/deps.html">tools.deps</a> configured correctly.</p>
</div>
<div class="paragraph">
<p>To import a Polylith <a href="#">workspace</a> as a project:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select <code>File &gt; New &gt; Project from Existing Sources&#8230;&#8203;</code> from the menu.</p>
</li>
<li>
<p>A wizard will guide you through the import:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Start with selecting the <code>./deps.edn</code> file</p>
</li>
<li>
<p>When asked, choose your desired version of the Java SDK</p>
</li>
<li>
<p>Otherwise, hit <code>Next</code> and finally <code>Create</code>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you are using Cursive <code>1.13.0</code> or later, follow the instructions <a href="https://cursive-ide.com/userguide/polylith.html">here</a>.</p>
</div>
<div class="paragraph">
<p>From the <code>Clojure Deps</code> tab (by default, it&#8217;s on the far right), enable <code>dev</code> under <code>Aliases</code>, then press the icon with two arrows to refresh:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/development/activate-dev-alias.png" alt="activate dev alias" width="250">
</div>
</div>
<div class="paragraph">
<p>To create a REPL, select <code>Current File &gt; Edit Configurations&#8230;&#8203;</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/development/edit-configuration.png" alt="edit configuration" width="200">
</div>
</div>
<div class="paragraph">
<p>Then click the <code>+</code> sign and select <code>Clojure REPL &gt; Local</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/development/create-local-repl.png" alt="create local repl" width="250">
</div>
</div>
<div class="paragraph">
<p>Configure like so:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Name:</code> type <code>REPL</code></p>
</li>
<li>
<p><code>Which type of REPL to run</code> choose <code>nREPL</code></p>
</li>
<li>
<p><code>How to run it</code> choose <code>Run with Deps</code></p>
<div class="ulist">
<ul>
<li>
<p><code>Options:</code> type <code>-A:dev:test</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>Common Options &gt; Module:</code> select your Polylith workspace directory, e.g., <code>example</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Press <code>OK</code>. Now start the REPL in debug mode by clicking the bug icon:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/development/debug.png" alt="debug" width="150">
</div>
</div>
<div class="paragraph">
<p>Under the <code>REPL</code> view, you should soon see something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Clojure 1.11.1
nREPL server started on port 56855 on host localhost - nrepl://localhost:56855</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have configured everything <a href="https://github.com/clojure/tools.deps">tools.deps</a> needs and are ready to write some Clojure code!</p>
</div>
</div>
<div class="sect2">
<h3 id="_trying_out_your_development_environment">Trying Out Your Development Environment</h3>
<div class="paragraph">
<p>Look at the generated <code>./deps.edn</code> file.
Notice that it already includes <code>development/src</code> on the path under the <code>:dev</code> alias:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"> :aliases  {:dev {:extra-paths ["development/src"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>(You might remember we had you enable the <code>dev</code> alias above under <code>Clojure Deps</code> and for the REPL via <code>-A:dev:test</code>.)</p>
</div>
<div class="paragraph">
<p>To get started, create a dev namespace.
We suggest you use <code>dev</code> as a top namespace here, not your <a href="#">workspace</a> top namespace.
This strategy keeps your production code entirely separate from your development code.</p>
</div>
<div class="paragraph">
<p>One way to structure dev code is to give each developer their own namespace under <code>dev</code>.
Following this pattern, create the namespace <code>dev.lisa</code>:<br>
Right-click on the <code>development/src</code> directory, select <code>New &gt; Clojure Namespace</code>, and type <code>dev.lisa</code>.</p>
</div>
<div id="cursive-enable-auto-add" class="paragraph">
<p>A dialog will pop up and ask you if you want to add the file to git:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/development/add-file-to-git.png" alt="add file to git" width="600">
</div>
</div>
<div class="paragraph">
<p>Check <code>Don&#8217;t ask again</code> and click the <code>Add</code> button.</p>
</div>
<div class="paragraph">
<p>If the namespace is not recognized, you may need to click the icon with two arrows under the <code>Clojure Deps</code> tab to refresh:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/development/refresh.png" alt="refresh" width="150">
</div>
</div>
<div class="paragraph">
<p>Now you can write some code in <code>lisa.clj</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns dev.lisa)

(+ 1 2 3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Load the namespace by sending <code>(ns dev.lisa)</code> to the REPL.</p>
</div>
<div class="paragraph">
<p>Send <code>(+ 1 2 3)</code> to the REPL.
You should see <code>6</code> in the REPL view.</p>
</div>
<div class="paragraph">
<p>Congratulations, you now have a working development environment!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_component">Component</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_component_2" class="sect0">Component</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>If you have been following our <a href="#">tutorial</a>, you should now have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An example <a href="#">workspace</a></p>
</li>
<li>
<p>A working <a href="#">development</a> environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You will soon create your first component.
But before you do that, open <code>workspace.edn</code> in your editor and set <code>:auto-add</code> to <code>true</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure"> :vcs {:name "git"
       :auto-add true}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>:auto-add</code> option tells <code>poly</code> to automatically add files generated by the <a href="commands.html#create">create</a> command to <a href="git.html">git</a>.
This behavior will be helpful in the examples that follow.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>When <code>:auto-add</code> is <code>false</code>, you have to either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Manually <a href="https://git-scm.com/docs/git-add">git add</a> files generated by <a href="commands.html#create">create</a> commands yourself.</p>
</li>
<li>
<p>Or specify the <code>:git-add</code> option on <code>poly</code> <a href="commands.html#create">create</a> commands.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_execute_commands">How to Execute Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you create a component, let&#8217;s recap the two ways of executing <code>poly</code> commands:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>poly help</code> - the stand-alone version of the tool.</p>
</li>
<li>
<p><code>clojure -M:poly help</code> - as a Clojure dep from the workspace directory.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Which forms are available depends on how you <a href="#">installed</a> <code>poly</code>.</p>
</div>
<div class="paragraph">
<p>All the documentation refers to the first form, even though the other form is also valid.</p>
</div>
<div class="paragraph">
<p>A third way to execute <code>poly</code> commands is through the <code>poly</code> shell.
You start the poly shell via the <a href="commands.html#shell">shell</a> command:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>poly shell</code></p>
</li>
<li>
<p><code>clojure -M:poly shell</code></p>
</li>
</ol>
</div>
<div id="shell-is-default" class="paragraph">
<p>The <a href="commands.html#shell">shell</a> command is the default command:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>poly</code></p>
</li>
<li>
<p><code>clojure -M:poly</code></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/component/start-a-shell.png" alt="start a shell">
</div>
</div>
<div class="paragraph">
<p>From the poly shell, it&#8217;s enough to enter the name of the command, e.g.:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/component/shell-info.png" alt="shell info">
</div>
</div>
<div class="paragraph">
<p>In most cases, the poly shell is the most convenient way to execute commands.
It gives you instant feedback, history, and autocomplete.
Feel free to use the <a href="#">shell</a> from now on.
It will make you more productive and enhance your development experience!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Type <a href="#quit"><code>quit</code></a> to end your <code>poly</code> shell session.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-component">Creating a Component</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s continue with our example by executing the <a href="commands.html#create-component">create component</a> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">poly create component name:user</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your workspace directory structure will now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example
├── bases
├── components
│   └── user # <b class="conum">(1)</b>
│       ├── deps.edn
│       ├── resources
│       │   └── user
│       ├── src
│       │   └── se
│       │       └── example
│       │           └── user
│       │               └── interface.clj
│       └── test
│           └── se
│               └── example
│                   └── user
│                       └── interface_test.clj
├── deps.edn
├── development
│   └── src
│       └── dev
│           └── lisa.clj
├── logo.png
├── projects
├── readme.md
└── workspace.edn</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>new <code>user</code> component</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You&#8217;ll notice the command also printed out this message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">  Remember to add :local/root dependencies to dev and project 'deps.edn' files.</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a reminder to add the component to your <code>./deps.edn</code> file.
If you don&#8217;t, tools.deps and the development environment will not recognize your newly created component, which would be a pity!</p>
</div>
<div class="paragraph">
<p>The <code>poly</code> tool leaves this task to you as a developer.
Our philosophy is to leave the editing of files to you.
While we are happy to generate files for you, we want to give you complete control over changing your files.</p>
</div>
<div id="add-to-deps-edn-component" class="paragraph">
<p>Let&#8217;s listen to the helpful reminder.
Add the <code>user</code> component to your <code>./deps.edn</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">{:aliases  {:dev {:extra-paths ["development/src"]

                  :extra-deps {poly/user {:local/root "components/user"} ;; <b class="conum">(1)</b>

                               org.clojure/clojure {:mvn/version "1.11.1"}}}

            :test {:extra-paths ["components/user/test"]}}} ;; <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add the <code>user</code> component as a dependency</p>
</li>
<li>
<p>Add the <code>user</code> component tests</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All dependency keys must be unique.
A good pattern is to prefix them with <code>poly/</code> followed by the brick name, e.g., <code>poly/user</code> as in this example.</p>
</div>
<div id="expose-code-outside-workspace" class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
If you expose your code outside your workspace, e.g. as a <a href="artifacts.html">library</a>, then you should use a more unique prefix, e.g. <code>maven-group-id.workspace-name/</code>, see for example how <a href="https://github.com/imrekoszo/polylith-kaocha/blob/master/projects/example/deps.edn#L14">these</a> components are configured in the Kaocha test runner (You don&#8217;t need to include <code>.bases</code> and <code>.components</code> in the prefix, polylith-kaocha/kaocha-resource-config-loader` should be enough, because components and bases can&#8217;t share the same name).
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Most IDEs now support adding components as a <code>:local/root</code> dependency, but if you are not using Cider, Calva, or a current version of Cursive, please review <a href="#ide-local-root">IDE Support for <code>:local/root</code></a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Cursive users: After creating a component, you may need to refresh your IDE by clicking the <code>Import Changes</code> link:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/component/cursive-import-changes.png" alt="cursive import changes" width="400">
</div>
</div>
</td>
</tr>
</table>
</div>
<div id="generated-deps-edn" class="paragraph">
<p>The component has its own <code>deps.edn</code> file that looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">{:paths ["src" "resources"]
 :deps {}
 :aliases {:test {:extra-paths ["test"]
                  :extra-deps {}}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It specifies a <code>src</code>, <code>resources</code>, and <code>test</code> directory.</p>
</div>
<div class="paragraph">
<p>The <a href="commands.html#create-component">create component</a> command created the user component <code>resources</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example
├── components
│   └── user
│       ├── resources
│       │   └── user</code></pre>
</div>
</div>
<div class="paragraph">
<p>This directory contains a <code>user</code> directory, which is the name of the component&#8217;s <a href="#">interface</a> and is where you put your resources, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example
├── components
│   └── user
│       ├── resources
│       │   └── user
│       │       └── myimage.png</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason you should put <code>myimage.png</code> under <code>resources/user</code> and not directly under <code>resources</code> is that you want to avoid name clashes.
This would happen if the same filename existed in more than one component in a <a href="#">project</a>.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t need the <code>resources</code> directory, you can delete it and remove it from the corresponding component <code>deps.edn</code> file.
That said, you should consider keeping it around.
It offers a deliberately clash-resistant naming convention for any resources you or your team might add in the future.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s continue by executing the <a href="commands.html#info">info</a> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">poly info</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/component/output/info.png" alt="info" width="350">
</div>
</div>
<div class="paragraph">
<p>The output tells you you have one <code>development</code> project, one <code>user</code> component, and one <code>user</code> <a href="#">interface</a> but no <a href="#">base</a> (yet).
We refer to components and bases as <em>bricks</em> (we will soon explain what a base is).
The cryptic <code>s--</code> and <code>st-</code> will be described in the <a href="flags.html">flags</a> section.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If your <code>poly</code> output does not look as nice and colorful, see <a href="colors.html">colors</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_an_implementation">Add an Implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now, let&#8217;s add the <code>core</code> namespace to <code>user</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/component/add-user-namespaces.png" alt="add user namespaces" width="350">
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;and change it to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns se.example.user.core)

(defn hello [name]
  (str "Hello " name "!"))</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;and update the <code>interface</code> to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns se.example.user.interface
  (:require [se.example.user.core :as core]))

(defn hello [name]
  (core/hello name))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>interface</code> delegates the incoming call to the implementing <code>core</code> namespace, which is the most common way of structuring components in Polylith.</p>
</div>
<div class="paragraph">
<p>In this example, we had you put all your implementing code in one single namespace.
As a codebase grows, more namespaces can be added to the component as needed.
There is no rule that the implementing namespace must be named <code>core</code>, but this is what the <a href="commands.html#create-component">create component</a> command generates, and we stuck with this default for this example.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ide-local-root">IDE Support for <code>:local/root</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/clojure-emacs/cider">Cider</a>, <a href="https://marketplace.visualstudio.com/items?itemName=betterthantomorrow.calva">Calva</a>, and <a href="https://cursive-ide.com/">Cursive (v1.13.0 and later)</a> all include support <code>:local/root</code> dependencies.</p>
</div>
<div class="paragraph">
<p>If your IDE doesn&#8217;t include support for <code>:local/root</code> dependencies, and you are unable to switch to an IDE that has this support, then you have to add your components as <code>:extra-paths</code> instead of <code>:extra-deps</code> in your <code>./deps.edn</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">{:aliases {:dev {:extra-paths ["development/src"
                               "components/user/src"  ;; <b class="conum">(1)</b>
                               "components/user/resources"]} ;; <b class="conum">(2)</b>

           :test {:extra-paths ["components/user/test"]}}}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>user</code> component <code>src</code> added as a path</p>
</li>
<li>
<p><code>user</code> component <code>resources</code> added as a path</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If at all possible, we recommend you add <a href="#add-to-deps-edn-component">components as dependencies</a> instead of paths for these reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It&#8217;s more readable.</p>
</li>
<li>
<p>It&#8217;s consistent with how <a href="#">projects</a> are specified.</p>
</li>
<li>
<p>You won&#8217;t have to duplicate the bricks library dependencies in your <code>./deps.edn</code>.</p>
</li>
<li>
<p>You can add or remove the <code>resources</code> directory from a brick without having to remember to update your <code>./deps.edn</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to compare the difference, take a look at how <code>article</code> was elegantly added as a single <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app/blob/5b6df23d63500a4540b75308379e06dfdeb8b767/deps.edn#L7">dependency</a> versus adding it as two <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app/blob/e6f7f200bc46e4e2595e123947eec442ad91c9ab/deps.edn#L7-L8">paths</a> in the RealWorld example app.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interface">Interface</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_interface_2" class="sect0">Interface</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Component interfaces give many benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Consistency</em>. Components can only be accessed through their interface, making them easy to find, use, and reason about.</p>
</li>
<li>
<p><em>Encapsulation</em>. You can change a component&#8217;s implementing namespaces without breaking the interface contract.</p>
</li>
<li>
<p><em>Composability</em>. All components have access to all other components via their interfaces, and you can replace them as long as they use the same interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you created the <code>user</code> <a href="#create-component">component</a> as part of our <a href="#">tutorial</a>, <code>poly</code> also created the <code>user</code> interface.</p>
</div>
<div class="paragraph">
<p>So what is an <code>interface</code>, and what is it good for?</p>
</div>
<div class="paragraph">
<p>An interface in the Polylith world is a namespace named <code>interface</code> that usually lives in one, but sometimes several, sub-namespaces within a component.</p>
</div>
<div class="paragraph">
<p>Looking at our example <code>user</code> component, if you exclude the top namespace, in Polylith we think of its interface namespace as <code>user.interface</code>.</p>
</div>
<div class="paragraph">
<p>The interface defines <code>def</code>, <code>defn</code>, or <code>defmacro</code> statements which form the contract that it exposes to other components and bases.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="one-interface-in-multiple-components">Declaring the Same Interface in Multiple Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s pretend we have the interface namespace <code>user.interface</code> containing the functions <code>fun1</code> and <code>fun2</code> and that two components <code>user</code> and <code>admin</code> implement this interface, e.g,:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">▾ myworkspace
  ...
  ▾ components
    ▾ user # <b class="conum">(1)</b>
      ▾ src
        ▾ com
          ▾ mycompany
            ▾ user # <b class="conum">(2)</b>
                interface.clj
                  fun1
                  fun2
                ...
    ▾ admin # <b class="conum">(3)</b>
      ▾ src
        ▾ com
          ▾ mycompany
            ▾ user # <b class="conum">(4)</b>
                interface.clj
                  fun1
                  fun2
                ...
  ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>user</code> component</p>
</li>
<li>
<p>implements <code>user</code> interface</p>
</li>
<li>
<p><code>admin</code> component</p>
</li>
<li>
<p>also implements <code>user</code> interface</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Because we are free to edit the <code>interface.clj</code> file for both user and admin, they can get out of sync if we are not careful.
Luckily, the <code>poly</code> tool will help us keep them consistent and complain if they differ when we run the <a href="commands.html#check">check</a>, <a href="commands.html#info">info</a> or <a href="commands.html#test">test</a> commands:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Check</th>
<th class="tableblock halign-left valign-top">Example mismatch</th>
<th class="tableblock halign-left valign-top">To protect against</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of arguments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[a b]</code><br>
<code>[a b c]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incompatible signatures</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Argument order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[a b c]</code><br>
<code>[b c a]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accidental argument call order mismatches</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type hints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[^String x y]</code><br>
<code>[x y]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incompatible types and type confusion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functions and macros</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(defn foo [])</code><br>
<code>(defmacro foo [])</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incompatible composability: functions are composable, and macros are not</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_splitting_an_interface_into_sub_namespaces">Splitting an Interface into Sub-Namespaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We often choose to have a single <code>interface</code> namespace in a component, but dividing the interface into several sub-namespaces is possible.
To do so, create an <code>interface</code> package (directory) with the name <code>interface</code> at the component root and then add the sub-namespaces.</p>
</div>
<div class="paragraph">
<p>You can find an example in Polylith itself, where the <code>util</code> component divides its <a href="https://github.com/polyfy/polylith/tree/master/components/util/src/polylith/clj/core/util/interface">interface</a> into several sub-namespaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">util
└── interface
    ├── color.clj
    ├── exception.clj
    ├── os.clj
    ├── str.clj
    └── time.clj</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dividing an interface like this can be handy to group and sub-group the interface functions.
One typical usage is to place <a href="https://clojure.org/about/spec">clojure specs</a> in its own <code>spec</code> sub-namespace.
You can see an example of this in the <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app">RealWorld example app</a>, where the <code>article</code> component has both an <code>article.interface</code> and an <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app/blob/master/components/article/src/clojure/realworld/article/interface/spec.clj"><code>article.interface.spec</code></a> sub-interface.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of the sub-interface usage from the <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app/blob/master/bases/rest-api/src/clojure/realworld/rest_api/handler.clj">RealWorld example app handler</a> namespace in its <code>rest-api</code> <a href="#">base</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns clojure.realworld.rest-api.handler
  (:require ...
            [clojure.realworld.user.interface.spec :as user-spec]
            ...))

(defn login [req]
  (let [user (-&gt; req :params :user)]
    (if (s/valid? user-spec/login user)
      (let [[ok? res] (user/login! user)]
        (handle (if ok? 200 404) res))
      (handle 422 {:errors {:body ["Invalid request body."]}}))))</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Every time you are tempted to split up an interface into sub-namespaces, instead consider splitting the component into smaller components!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delegation">Delegation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The most common way of structuring code in components is to delegate calls from the interface to one or more implementing namespaces.</p>
</div>
<div class="paragraph">
<p>There is one case where putting the implementation directly in the interface can be worth considering: if the functions are one-liners or tiny.
You can see an example of this in the <a href="https://github.com/polyfy/polylith/blob/master/components/path-finder/src/polylith/clj/core/path_finder/interface/criterias.clj">path-finder</a> component of the Polylith workspace.</p>
</div>
<div class="paragraph">
<p>Ultimately, it&#8217;s up to you to do what you think is best.</p>
</div>
<div class="paragraph">
<p>Our experience has shown us many advantages to keeping interfaces tiny and having them only expose what is needed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interface_definitions">Interface Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So far, we have only used functions in the interface.
Polylith also supports having <code>def</code> and <code>defmacro</code> statements in the interface.
There is no magic here; just include the definitions you want, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns se.example.logger.interface
  (:require [se.example.logger.core :as core]))

(defmacro info [&amp; args]
  `(core/info ~args))</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;which delegates to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns se.example.logger.core
  (:require [taoensso.timbre :as timbre]))

(defmacro info [args]
  `(timbre/log! :info :p ~args))</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_about_interfaces">More About Interfaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This list of tips makes more sense when you have used Polylith for a while, so bookmark this section for later:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The interface docstrings should focus on what problem each function/macro solves, while the implementation docstrings can focus on concrete details.</p>
</li>
<li>
<p>Consider sorting interface namespace functions in alphabetical order for easy lookup.
Order functions in implementation namespaces freely.</p>
</li>
<li>
<p>The interface can expose the entity&#8217;s name, e.g., <code>sell [car]</code>, while the implementing function can expose specific usage via destructuring, e.g., <code>sell [{:keys [model type color]}]</code>.</p>
</li>
<li>
<p>It sometimes makes sense for a <a href="http://clojure-doc.org/articles/language/functions.html#multi-arity-functions">multi-arity function</a> in an interface to delegate to a single arity function in the implementing namespace:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(defn foo
  ([a b c] (some-impl/foo a b c)
  ([a b] (foo a b nil)))</code></pre>
</div>
</div>
</li>
<li>
<p>It sometimes makes sense for a <a href="http://clojure-doc.org/articles/language/functions.html#variadic-functions">variadic functions</a> in an interface to delegate to function in the implementing namespace that accepts the variadic portion as a vector:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(defn foo [a b &amp; other]
  (some-impl/foo a b other))</code></pre>
</div>
</div>
</li>
<li>
<p>Polylith simplifies testing by allowing access to implementing namespaces from the <code>test</code> directory.
Polylith restricts the code under the <code>src</code> directory to only access the <code>interface</code> namespace.
The <code>poly</code> tool validates these restrictions when running the <a href="commands.html#check">check</a>, <a href="commands.html#info">info</a>, and <a href="commands.html#test">test</a> command.</p>
</li>
<li>
<p>Because Polylith only allows the code under <code>src</code> to call <code>interface</code> code, you can think of publicly declared implementation functions as protected (as in Java).
Because these "protected" functions are technically public, you can test and debug them more easily.
For example, when stopping at a breakpoint to evaluate a "protected" function, you don&#8217;t need to use the special syntax you would need to access a private function.</p>
</li>
</ul>
</div>
<div id="interface-ns" class="ulist">
<ul>
<li>
<p>Polylith will always recognize <code>interface</code> and <code>ifc</code> as interface namespace names.
By default, it will generate code using <code>interface</code> as the interface namespace name when you create a component.
You can override this default via <code>:interface-ns</code> in <code>./workspace.edn</code>.
Scenarios:</p>
<div class="ulist">
<ul>
<li>
<p>You want to share code between Clojure and ClojureScript via <code>.cljc</code> source files.
Since <code>interface</code> is a reserved word in ClojureScript, it will cause problems.
In this case, you can either:</p>
<div class="ulist">
<ul>
<li>
<p>set <code>:interface-ns</code> to <code>ifc</code>, <code>poly</code> will use <code>ifc</code> as the interface namespace name for generated code when you create a component</p>
</li>
<li>
<p>or leave <code>interface</code> as the default and override by specifying <code>interface:ifc</code> as an option to <a href="commands.html#create-component">create component</a> for components that will also run from ClojureScript.</p>
</li>
</ul>
</div>
</li>
<li>
<p>You want to consume Clojure code from another language on the JVM, e.g., Kotlin, where <code>interface</code> is a reserved word.
You could set <code>:interface-ns</code> to anything that won&#8217;t conflict, for the sake of this example, let&#8217;s say <code>api</code>.
The <code>poly</code> tool would now use <code>api</code> for the interface namespace name when it generates code when you create a component, but also recognize <code>interface</code> and <code>ifc</code> as interface names.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_base">Base</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_base_2" class="sect0">Base</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>A <code>base</code> is similar to a <a href="#">component</a> except for two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It doesn&#8217;t have an <a href="#">interface</a>.</p>
</li>
<li>
<p>It exposes a public API to the outside world.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The lack of an <a href="#">interface</a> makes bases less composable than components.
This is fine; the sole purpose of a <code>base</code> is to act as a bridge between the real world and the <a href="#">components</a> it delegates to (via the components' interfaces).
This structure gives us the modularity we need to build simple, understandable services and tools.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s continue with our <a href="#">tutorial</a>.
The last thing you did was <a href="#create-component">create a component</a>.
Run the following <a href="commands.html#create-base">create base</a> command to create a <code>cli</code> base:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">poly create base name:cli</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your workspace should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example
├── bases
│   └── cli # <b class="conum">(1)</b>
│       ├── deps.edn
│       ├── resources
│       │   └── cli
│       ├── src
│       │   └── se
│       │       └── example
│       │           └── cli
│       │               └── core.clj
│       └── test
│           └── se
│               └── example
│                   └── cli
│                       └── core_test.clj
├── components
│   └── user
│       ├── deps.edn
│       ├── resources
│       │   └── user
│       ├── src
│       │   └── se
│       │       └── example
│       │           └── user
│       │               ├── core.clj
│       │               └── interface.clj
│       └── test
│           └── se
│               └── example
│                   └── user
│                       └── interface_test.clj
├── deps.edn
├── development
│   └── src
│       └── dev
│           └── lisa.clj
├── logo.png
├── projects
├── readme.md
└── workspace.edn</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>new <code>cli</code> base</p>
</li>
</ol>
</div>
<div id="add-to-deps-edn-base" class="paragraph">
<p>Edit your <code>./deps.edn</code> to add your newly created base:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure"> :aliases  {:dev {:extra-paths ["development/src"]

                  :extra-deps {poly/user {:local/root "components/user"}
                               poly/cli  {:local/root "bases/cli"}  ;; <b class="conum">(1)</b>

                               org.clojure/clojure {:mvn/version "1.11.1"}}}

            :test {:extra-paths ["components/user/test"
                                 "bases/cli/test"]} ;; <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add the <code>cli</code> base as a dependency</p>
</li>
<li>
<p>Add the <code>cli</code> base tests</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Cursive users: refresh your IDE to pick up the updates.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, add some code to the base:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">(ns se.example.cli.core
  (:require [se.example.user.interface :as user])
  (:gen-class)) ;; <b class="conum">(1)</b>

(defn -main [&amp; args] ;; <b class="conum">(2)</b>
  (println (user/hello (first args)))
  (System/exit 0))</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><a href="https://clojuredocs.org/clojure.core/gen-class">:gen-class</a> tells the Clojure compiler to generate a Java class</p>
</li>
<li>
<p>which allows the JVM to invoke <code>-main</code> when the <code>cli</code> base is invoked from the command line</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>poly</code> tool generated a <code>deps.edn</code> file for the <code>cli</code> base:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">{:paths ["src" "resources"]
 :deps {}
 :aliases {:test {:extra-paths ["test"]
                  :extra-deps {}}}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is identical to the <a href="#generated-deps-edn">deps.edn poly generated when you created the user component</a>. It will soon be needed when we create a <a href="#">project</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
You never add a dependency from a base <code>deps.edn</code> to a component.
The <code>poly</code> tool will automatically wire the <code>cli</code> base to the <code>user</code> component via its <a href="#">interface</a> after you&#8217;ve added them to your <a href="#">project</a>.
Bases, or bricks for that matter, are unaware of concrete components; they only talk to <a href="#">interfaces</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We are getting closer to building a deployable <a href="artifacts.html">artifact</a>, which will turn your code into something useable, a command-line tool.
To get there, you must first create a <a href="#">project</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_project">Project</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_project_2" class="sect0">Project</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>There are two kinds of <code>projects</code> in Polylith: development and deployable.</p>
</div>
<div class="paragraph">
<p><strong>The <a href="#">development</a> project</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Where you work with the code, often from a REPL.</p>
</li>
<li>
<p>Described in <code>./deps.edn</code> which:</p>
<div class="ulist">
<ul>
<li>
<p>Specifies all bricks and project libraries used by the project.</p>
</li>
<li>
<p>Optionally defines <a href="profile.html">profiles</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Source code to support development (not part of any component or base) lives under the <code>./development</code> directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>A deployable project:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Used to build deployable <a href="artifacts.html">artifacts</a>, e.g., lambda functions, REST APIs, tools, etc.</p>
</li>
<li>
<p>Has its own directory under the <code>./projects</code> directory (e.g., <code>my-project</code>), which:</p>
<div class="ulist">
<ul>
<li>
<p>Has a <code>deps.edn</code> specifying the bricks and libraries used by the deployable project.</p>
<div class="ulist">
<ul>
<li>
<p>If the referenced bricks contain any tests, they are run when you execute the <a href="commands.html#test">test</a> command.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Can optionally have a <code>resources</code> directory.</p>
</li>
<li>
<p>Can optionally have a <code>test</code> directory for project-specific tests.</p>
</li>
<li>
<p>Doesn&#8217;t have a <code>src</code> directory.
We discourage a <code>src</code> directory for deployable projects; all production code should normally only live in bricks.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>:project</code> key in <code>./workspace.edn</code> configures project aliases and, optionally, how <code>poly</code> should run your <a href="testing.html">tests</a>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s continue with our <a href="#">tutorial</a>.
The last thing you did was create a <code>cli</code> <a href="#create-component">base</a>.
Run the following <a href="commands.html#create-project">create project</a> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">poly create project name:command-line</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your workspace should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example
├── bases
│   └── cli
│       ├── deps.edn
│       ├── resources
│       │   └── cli
│       ├── src
│       │   └── se
│       │       └── example
│       │           └── cli
│       │               └── core.clj
│       └── test
│           └── se
│               └── example
│                   └── cli
│                       └── core_test.clj
├── components
│   └── user
│       ├── deps.edn
│       ├── resources
│       │   └── user
│       ├── src
│       │   └── se
│       │       └── example
│       │           └── user
│       │               ├── core.clj
│       │               └── interface.clj
│       └── test
│           └── se
│               └── example
│                   └── user
│                       └── interface_test.clj
├── deps.edn
├── development
│   └── src
│       └── dev
│           └── lisa.clj
├── logo.png
├── projects
│   └── command-line # <b class="conum">(1)</b>
│       └── deps.edn
├── readme.md
└── workspace.edn</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>new <code>command-line</code> project</p>
</li>
</ol>
</div>
<div id="project-alias" class="paragraph">
<p>The <code>poly</code> tool helpfully reminds us:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">  It's recommended to add an alias to :projects in ./workspace.edn for the command-line project.</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t follow this advice, the <code>command-line</code> project heading will default to <code>?1</code> when running the <a href="commands.html#info">info</a> command.
Go ahead and add an alias in your <code>./workspace.edn</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">  {...
   :projects {"development" {:alias "dev"}
              "command-line" {:alias "cl"}}} <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add the <code>cl</code> <code>alias</code> for the <code>command-line</code> project</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Add the <code>user</code> component and the <code>cli</code> base to your new project by editing <code>projects/command-line/deps.edn</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-clojure" data-lang="clojure">{:deps {poly/user {:local/root "../../components/user"} ;; <b class="conum">(1)</b>
        poly/cli  {:local/root "../../bases/cli"} ;; <b class="conum">(2)</b>

        org.clojure/clojure {:mvn/version "1.11.1"}}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add <code>user</code> component</p>
</li>
<li>
<p>Add <code>cli</code> base</p>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>The <code>:local/root</code> paths begin with <code>../../</code> because the <code>components</code> and <code>bases</code> directories are two levels up relative to <code>projects/command-line</code> directory.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>When you run the <a href="commands.html#test">test</a> command, <code>poly</code> will determine which tests should run.
If you want to run tests for each deployable project outside of <code>poly</code> using Clojure&#8217;s tools.deps, you must specify the test paths in your <code>./deps.edn</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Each <code>./projects/**/deps.edn</code> specifies what bricks to include via <code>:local/root</code> dependencies.
The <code>poly</code> <a href="commands.html">test</a> command determines the appropriate test dependencies from each referenced brick&#8217;s <code>deps.edn</code>.</p>
</div>
<div class="paragraph">
<p>But Clojure&#8217;s tools.deps does not include test dependencies from <code>:local/root</code> dependencies.
To support IDEs and other tooling, you must compensate by adding your brick tests as separate paths in your <code>./deps.edn</code>, just as you did for your <a href="#add-to-deps-edn-component">user component</a> and <a href="#add-to-deps-edn-base">cli base</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Where you specify dependency to bricks differs based on the project type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For the development project: <code>./deps.edn &gt; :aliases &gt; :dev &gt; :extra-deps</code></p>
</li>
<li>
<p>For deployable projects: <code>./projects/PROJECT-DIR/deps.edn &gt; :deps</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_shell">Shell</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_shell_2" class="sect0">Shell</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Not only does the <code>shell</code> make you more productive, but it&#8217;s also fun to use!
It takes full advantage of <a href="https://github.com/jline/jline3">jline3</a> under the hood, which supports macOS, Linux, FreeBSD, Solaris, and Windows.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s explore some shell features.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Our examples assume you are exploring from our ongoing <a href="#">tutorial</a> <code>example</code> <a href="#">workspace</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="launch">Launching</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start a shell by typing <code>poly</code> from your workspace root directory (<a href="#shell-is-default">shell is the default command</a>):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-start.png" alt="shell start" width="600">
</div>
</div>
<div class="paragraph">
<p>Notice that the <code>example$</code> prompt includes your current workspace name.
From here, you can run commands and get instant feedback.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quit">Quitting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To quit the shell, type <code>exit</code> or <code>quit</code> or press either of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>kbd:[Ctrl+C]</p>
</li>
<li>
<p>kbd:[Ctrl+D] (if not on Windows)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lets_play">Let&#8217;s Play</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="#launch">Launch a poly shell</a> and play along.</p>
</div>
<div class="paragraph">
<p>Press kbd:[Tab] to see all available commands:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-all-commands.png" alt="shell all commands" width="600">
</div>
</div>
<div class="paragraph">
<p>Type <code>i</code> to match all commands starting with the letter <code>i</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-i.png" alt="shell i" width="600">
</div>
</div>
<div class="paragraph">
<p>Press kbd:[Tab] to autocomplete the <a href="commands.html#info">info</a> command and list valid arguments:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-info.png" alt="shell info" width="600">
</div>
</div>
<div class="paragraph">
<p>You can usually skip the leading colon character; for example, type <code>l</code> to match <code>:loc</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-info-loc.png" alt="shell info loc" width="600">
</div>
</div>
<div class="paragraph">
<p>Press kbd:[Tab] to autocomplete <code>:loc</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-info-loc-tab.png" alt="shell info loc tab" width="600">
</div>
</div>
<div class="paragraph">
<p>To distinguish <code>:project</code> from <code>project</code>, type the leading <code>:</code> (colon character):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-info-loc-p.png" alt="shell info loc p" width="600">
</div>
</div>
<div class="paragraph">
<p>Complete <code>:project</code> by pressing kbd:[Tab].
Type <code>p</code> then press kbd:[Tab] to autocomplete <code>project:</code>, and kbd:[Tab] again, to list all projects in the workspace:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-info-loc-project.png" alt="shell info loc project" width="600">
</div>
</div>
<div class="paragraph">
<p>When you have only one candidate, select it by pressing kbd:[Tab]:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-one-candidate.png" alt="shell one candidate" width="600">
</div>
</div>
<div class="paragraph">
<p>The trailing <code>:</code> (colon character) indicates a multi-select argument (you can select more than one project).
You can leave the multi-select input mode by pressing kbd:[Space]; this removes the trailing colon:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-leave-multi-select.png" alt="shell leave multi select" width="600">
</div>
</div>
<div class="paragraph">
<p>An alternative way of selecting a listed candidate is to press kbd:[Tab] twice and use the arrow keys to move the selection cursor around (kbd:[Tab] and kbd:[Shift+Tab] also work):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-move-cursor.png" alt="shell move cursor" width="600">
</div>
</div>
<div class="paragraph">
<p>Press kbd:[Enter] to choose the item at the cursor:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-move-cursor-and-select.png" alt="shell move cursor and select" width="600">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_dash_item">The Dash Item</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>brick</code> argument shows you all available bricks.
Selecting the <code>-</code> (the dash character) tells <code>poly</code> you want no bricks selected (e.g., for testing):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-info-brick.png" alt="shell info brick" width="600">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_autocomplete_to_explore">Using Autocomplete to Explore</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Autocomplete really shines when there are many available suggestions.
The <a href="commands.html#ws">ws</a> command offers a good example.
Instead of trying to remember all the different <code>get:</code> arguments, the <code>shell</code> lists them for you:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-ws-get.png" alt="shell ws get" width="600">
</div>
</div>
<div class="paragraph">
<p>After you select <code>components</code>, the <code>shell</code> lists valid arguments.
Sometimes, you encounter multiple matching suggestions.
When one of them is an exact match for what you have typed:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-ws-get-components-user.png" alt="shell ws get components user" width="600">
</div>
</div>
<div class="paragraph">
<p>You can select it by typing <code>:</code> (the colon character):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-ws-get-components-user-colon.png" alt="shell ws get components user colon" width="600">
</div>
</div>
<div class="paragraph">
<p>You can continue navigating down into the workspace structure to find the information you are interested in:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-ws-get-browse.png" alt="shell ws get browse" width="600">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_switching_workspace">Switching Workspace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you start a shell from a workspace root directory (where the <code>workspace.edn</code> file lives), the workspace is automatically loaded, and you can execute all available commands against it.</p>
</div>
<div class="paragraph">
<p>You can switch to a different workspace without leaving the poly shell.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <a href="commands.html#create">create</a> and <a href="commands.html#test">test</a> commands don&#8217;t work on workspaces you have switched to.
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>If you want to play along, exit the shell, then clone <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app">clojure-polylith-realworld-example-app</a> under the same parent directory as your <code>example</code> workspace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ..
git clone https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>And relaunch the poly shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd example
poly</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can switch to another workspace using the <a href="commands.html#switch-ws">switch-ws</a> command in combination with its <code>dir</code> argument:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-switch-dir.png" alt="shell switch dir" width="600">
</div>
</div>
<div class="paragraph">
<p>The <code>shell</code> lists all directories and <code>.edn</code> files under the current directory.</p>
</div>
<div class="paragraph">
<p>Select the <code>clojure-polylith-realworld-example-app</code> directory by typing <code>.</code> followed by kbd:[Tab] to select <code>..</code> and then type <code>clo</code> (or something long enough) followed by kbd:[Tab] to select the workspace directory:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-switch-dir-realworld.png" alt="shell switch dir realworld" width="600">
</div>
</div>
<div class="paragraph">
<p>Switch workspace by pressing kbd:[Enter]:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-switched-dir.png" alt="shell switched dir" width="600">
</div>
</div>
<div class="paragraph">
<p>Notice the prompt has changed to show the currently selected workspace (by dir).
All commands will be run against this selected workspace.</p>
</div>
<div class="paragraph">
<p>You can go back to the <code>example</code> workspace by invoking <code>switch-ws</code> without arguments:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-switch-ws.png" alt="shell switch ws" width="600">
</div>
</div>
<div id="refresh-ws" class="paragraph">
<p>If you invoke <code>switch-ws</code> again when you are already on the root, this will read the workspace from disk again, which can be useful in some situations.</p>
</div>
<div class="sect2">
<h3 id="_switching_to_an_exported_workspace">Switching to an Exported Workspace</h3>
<div class="paragraph">
<p>You can switch to an exported workspace.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can export a workspace to a <code>.edn</code> file, e.g. via <code>poly ws out:usermanager.edn</code>.
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>If you want to play along, exit the shell, then clone the <code>polylith</code> branch of <a href="https://github.com/seancorfield/usermanager-example/tree/polylith">usermanager-example</a> project under the same parent directory as your <code>example</code> workspace, and export its workspace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ..
git clone --branch polylith https://github.com/seancorfield/usermanager-example.git
cd usermanager-example
poly ws out:usermanager.edn</code></pre>
</div>
</div>
<div class="paragraph">
<p>And relaunch the poly shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ../example
poly</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Switch to the exported workspace using the <code>file</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ switch-ws file:../usermanager-example/usermanager.edn
file:usermanager-example$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the prompt has changed to show the currently selected workspace (by export file).</p>
</div>
<div id="read-old-workspace" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>poly</code> tool supports reading old exported files, with older <a href="versions.html">versions</a> of the workspace structure, which are automatically migrated to the current version.
This is also true when reading an older version of a workspace, e.g. if you go back in the git history with git <a href="https://git-scm.com/docs/git-checkout">checkout</a> or <a href="https://git-scm.com/docs/git-switch">switch</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="switch-workspace">Switching workspace by name</h3>
<div class="paragraph">
<p>If you have workspaces <a href="#sub-workspaces">within</a> your workspace, other cloned workspaces, or  workspaces exported to file, there is a convenient way to access these from the shell.</p>
</div>
<div class="paragraph">
<p>First you need to configure these in the <a href="configuration.html#ws-shortcuts">:ws-shortcuts</a> key in your <a href="configuration.html#user">user config</a> file (<code>~/.config/polylith/config.edn</code>).
A workspace that lives in a directory is specified with <code>:dir</code>, while exported workspaces are specified with <code>:file</code>. They are accessed by the name of the directory/file, or <code>:name</code> if given.</p>
</div>
<div class="paragraph">
<p>This example assumes that you have cloned the repos <a href="https://github.com/polyfy/polylith">polylith</a> and <a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app">clojure-polylith-realworld-example-app</a>, and that you have <a href="explore-the-workspace.html#export-workspace">exported</a> "another-ws" to a file, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">{...
 :ws-shortcuts {:root-dir "/Users/joakimtengstrand/source/polylith"
                :paths [{:dir "examples/doc-example"}
                        {:dir "../clojure-polylith-realworld-example-app" :name "realworld"}
                        {:file "../sandbox/another-ws.edn"}]}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>:root-dir</code> is added to each path to get a full path.</p>
</div>
<div class="paragraph">
<p>Now we can switch workspace from the <a href="#">shell</a> with <code>via:NAME</code>
where NAME is the name of the directory/file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">polylith$ switch-ws via:
another-ws                (../sandbox/another-ws.edn)
backend       (examples/multiple-workspaces2/backend)
doc-example                    (examples/doc-example)
realworld (../clojure-polylith-realworld-example-app)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we type <code>d</code> and press kbd:[Tab] followed by kbd:[Enter] we switch to the <code>examples/doc-example</code> workspace directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">polylith$ switch-ws via:doc
dir:doc-example$</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can always switch back to the root workspace with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">dir:backend$ switch-ws
polylith$</code></pre>
</div>
</div>
<div class="paragraph">
<p>A workspace that has been exported to a file, e.g. <code>poly ws out:another-ws.edn</code>, can be selected with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">polylith$ switch-ws via:another-ws
file:another-ws</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to <code>switch-ws file:../sandbox/another-ws.edn</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_switch_at_launch">Switch at Launch</h3>
<div class="paragraph">
<p>You can launch a shell and immediately switch to a workspace:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-open-realworld.png" alt="shell open realworld" width="600">
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;or load a workspace from an export file, e.g.:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-open-usermanager.png" alt="shell open usermanager" width="600">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_workspace_switch_mechanics">Workspace Switch Mechanics</h3>
<div class="paragraph">
<p>Knowing how the shell supports workspace switching can be helpful.
It is pretty simple:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>After switching to workspace dir <code>D</code>, the shell silently appends <code>ws-dir:D</code> to each command before it runs it.</p>
</li>
<li>
<p>After switching to workspace export file <code>F</code>, the shell silently appends <code>ws-file:F</code> to each command before it runs it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autocomplete_examples">Autocomplete Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Autocomplete helps you execute different commands with the correct arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All valid sub-commands are suggested for a command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ create
base        component   project</code></pre>
</div>
</div>
</li>
<li>
<p>All valid arguments are suggested for a command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ test
:all          :all-bricks   :dev          :loc          :project      :verbose
brick         project       since</code></pre>
</div>
</div>
</li>
<li>
<p>Browse your file system when selecting files and directories:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ switch-ws dir:
../             bases/          components/     deps.edn        development/
projects/       workspace.edn   ~/</code></pre>
</div>
</div>
</li>
<li>
<p>Browse outdated libraries via the <a href="commands.html#libs">libs</a> command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ libs library:
org.clojure/clojure   org.slf4j/slf4j-nop   zprint/zprint</code></pre>
</div>
</div>
</li>
<li>
<p>Browse your workspace structure via the <a href="commands.html#ws">ws</a> command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ ws get:interfaces:user:
definitions               implementing-components   name                      type</code></pre>
</div>
</div>
</li>
<li>
<p>Browse documentation with the <a href="commands.html#doc">doc</a> command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc help:
check                deps-brick           doc                  tap
create-base          deps-project-brick   info                 test
create-component     deps-project         libs                 version
create-project       deps-workspace       overview             ws
create-workspace     deps                 shell
create               diff                 switch-ws</code></pre>
</div>
</div>
</li>
<li>
<p>Tag patterns defined in <code>workspace.edn</code> are suggested for the <code>since:</code> argument:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ info since:
previous-release   previous-stable    release            stable</code></pre>
</div>
</div>
</li>
<li>
<p>Remote git branches are suggested for some commands for the <code>branch:</code> argument (for autocomplete to work here, you need to start your shell with <a href="developing-poly.html#all-shell">:all</a> e.g., <code>poly :all</code>):</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">usermanager-example$ ws branch:
develop    master     polylith</code></pre>
</div>
</div>
</li>
<li>
<p>Only relevant bricks and projects are suggested for the <code>brick</code> and <code>project</code> arguments:</p>
<div class="ulist">
<ul>
<li>
<p>The shell only suggests projects marked for testing for the <a href="commands.html#info">info</a> and <a href="commands.html#test">test</a> commands:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">usermanager-example$ test project:
development   usermanager</code></pre>
</div>
</div>
</li>
<li>
<p>After you select a brick from the <a href="commands.html#deps">deps</a> command, only projects that contain that brick will be suggested:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">usermanager-example$ deps brick:database project:
development   usermanager</code></pre>
</div>
</div>
</li>
<li>
<p>After you select a project from the <a href="commands.html#deps">deps</a> command, only bricks from that project will be suggested:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">usermanager-example$ deps project:usermanager brick:
app-state        department       schema-fixture   web
database         schema           user             web-server</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limitations">Limitations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_browsing_directories">Browsing Directories</h3>
<div class="paragraph">
<p>When browsing the file system from the <code>dir:</code> argument, there are a couple of things worth mentioning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To go to the user home directory, you must type the full <code>~/</code> and not just <code>~</code> (this reflects a limitation in the underlying <a href="https://github.com/jline/jline3">jline3</a> integration):</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ switch-ws dir:~/
Public/                      Desktop/                     Templates/
proj/                        Documents/                   Videos/
Downloads/                   Dropbox/                     bin/
Music/                       Pictures/</code></pre>
</div>
</div>
</li>
<li>
<p>To navigate to a directory containing spaces, you must type the leading <code>"</code>.</p>
<div class="paragraph">
<p>Notice directory <code>"foo bar baz"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ switch-ws dir:
"foo bar baz"/   bases/           deps.edn         projects/        ~/
../              components/      development/     workspace.edn</code></pre>
</div>
</div>
<div class="paragraph">
<p>To match it type the leading <code>"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ switch-ws dir:"
"foo bar baz"/</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_workspace">Creating a Workspace</h3>
<div class="paragraph">
<p>The poly shell will not suggest <code>workspace</code> for the <a href="commands.html#create">create</a> command when already associated with a workspace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ create
base        component   project</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll typically run <a href="commands.html#create-workspace">create workspace</a> from your terminal shell (bash, PowerShell, zsh, etc) and then use the poly shell on that workspace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">$ poly create workspace name:myws top-ns:com.example
$ cd myws
$ poly</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer to use the shell to create a workspace, run the poly shell outside of any workspace directory:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shell/shell-create-workspace.png" alt="shell create workspace" width="600">
</div>
</div>
<div class="paragraph">
<p>Notice the lack of a workspace name in the prompt.
After you create your workspace, exit the shell and relaunch it from the new workspace directory.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_doc">Doc</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_doc_2" class="sect0">Doc</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>The <code>poly</code> tool includes a <a href="commands.html#doc">doc</a> command to open web-based documentation.
The <a href="#">shell</a>'s autocompletion support makes listing and accessing different parts of the documentation a breeze, so go ahead and <a href="#launch">start one up</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">poly</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the <code>doc</code> command to open the start page of the <code>poly</code> tool documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>example$</code> prompt shows that we are working from our <a href="#">tutorial</a> <code>example</code> <a href="#">workspace</a>, but you can experiment with the <code>doc</code> command from any workspace.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should see the page open in your web browser:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/doc/top-doc.png" alt="top doc">
</div>
</div>
<div class="paragraph">
<p>The page has some helpful links:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Link</th>
<th class="tableblock halign-left valign-top">Links to:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/doc/clj-poly-lib.png" alt="clj poly lib"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This documentation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/doc/clj-poly-doc.png" alt="clj poly doc"></span><br>
(the version of this documentation)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A page listing all the <a href="https://cljdoc.org/versions/polylith/clj-poly">different versions</a> of this documentation.
NOTE: Useful documentation starts at version <code>0.2.18</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/doc/clj-doc.png" alt="clj doc"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="https://cljdoc.org/">cljdoc</a> home page.
Cljdoc is a central hub that hosts documentation for many Clojure libraries and tools (including clj-poly!).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/doc/polylith-repo.png" alt="polylith repo"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="https://github.com/polyfy/polylith">polylith GitHub repo</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/doc/latest-doc-badge.png" alt="latest doc badge"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentation for the current <a href="https://github.com/polyfy/polylith/releases">release</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/doc/snapshot-doc-badge.png" alt="snapshot doc badge"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Documentation for the current <code>SNAPSHOT</code> release.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/doc/slack.png" alt="slack"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="https://clojurians.slack.com/messages/C013B7MQHJQ">#polylith</a> channel on <a href="http://clojurians.net/">Clojurians Slack</a>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>We automatically build a <code>SNAPSHOT</code> release and its associated documentation for every commit to the <a href="https://github.com/polyfy/polylith">master</a> branch; see <a href="polylith-ci-setup.html#releases">releases</a> for more details.</p>
</div>
<div class="paragraph">
<p>When you use a <code>SNAPSHOT</code> release via a <a href="#github-dependency">GitHub dependency</a>, you&#8217;ll be referring to its associated <code>SNAPSHOT</code> documentation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Use the search box or the left menu to navigate to pages and explore API docs:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/doc/doc-overview.png" alt="doc overview">
</div>
</div>
<div class="paragraph">
<p>And if you scroll down to the bottom of the left menu:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/doc/doc-overview-scrolled.png" alt="doc overview scrolled">
</div>
</div>
<div class="paragraph">
<p>Return to the poly shell to explore, then open other available docs at any time.</p>
</div>
<div class="paragraph">
<p>From the poly shell, type <code>doc</code> followed by a space to see the different help categories:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc
help   more   page   ws</code></pre>
</div>
</div>
<div class="paragraph">
<p>Doc categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#page">page</a> - web pages constitute the <code>poly</code> tool user manual, which you are reading a page of right now!</p>
</li>
<li>
<p><a href="#help">help</a> - <code>poly</code> <a href="commands.html">commands</a> docs</p>
</li>
<li>
<p><a href="#ws">ws</a> - <a href="workspace-structure.html">workspace structure</a> docs</p>
</li>
<li>
<p><a href="#more">more</a> - various other information: conceptual docs, blog posts, videos, podcasts, example workspaces, and other links</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s dig into these categories.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="page">page</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>page</code> argument to open a specific <code>poly</code> tool documentation page in your web browser.
Notice that the shell lists all pages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc page:
artifacts                flags                    readme
base                     git-hooks                shell
build                    git                      source-code
colors                   install                  state
component                interface                tagging
configuration            introduction             tap
contact                  libraries                test-runners
continuous-integration   license                  testing
dependencies             naming                   tools-deps
developing-poly          polylith-ci-setup        upgrade
development              polyx                    validations
doc                      production-systems       versions
example-systems          profile                  workspace
explore-the-workspace    project</code></pre>
</div>
</div>
<div class="paragraph">
<p>These are the same pages you see listed in the left menu in your web browser.</p>
</div>
<div class="paragraph">
<p>When you select a page, <code>poly</code> will open it in your web browser.
To open the <code>flags</code> page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">doc page:flags</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="help">help</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>help</code> argument takes you to the <code>poly</code> <a href="commands.html">commands</a> documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc help</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ask the shell to list all command help with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc help:
check                deps-project         shell
create-base          deps-workspace       switch-ws
create-component     deps                 tap
create-project       diff                 test
create-workspace     doc                  version
create               info                 ws
deps-brick           libs
deps-project-brick   overview</code></pre>
</div>
</div>
<div class="paragraph">
<p>To open the <code>check</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc help:check</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>poly</code> tool will open help for the <a href="commands.html#check">check</a> command in your web browser.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can get the same help at your terminal via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ help check</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ws">ws</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>ws</code> argument takes you to the <a href="workspace-structure.html">Workspace structure</a> documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc ws</code></pre>
</div>
</div>
<div class="paragraph">
<p>List all top keys via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc ws:
bases          name           user-input
changes        old            version
components     paths          ws-dir
configs        profiles       ws-local-dir
interfaces     projects       ws-reader
messages       settings       ws-type</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open the description for a specific top key in your web browser:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc ws:configs</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="more">more</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>more</code> argument covers all other documentation and links that are not specifically about the <code>poly</code> tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc more:
blog-posts    python-tool
high-level    slack
in-japanese   videos
podcasts      workspaces</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s dig into the different categories:</p>
</div>
<div class="sect2">
<h3 id="_blog_posts">blog posts</h3>
<div class="paragraph">
<p>Open blog posts via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ doc more:blog-posts:
a-fresh-take-on-monorepos-in-python
how-polylith-came-to-life
leveraging-polylith-to-improve-consistency-reduce-complexity-and-increase-changeability
the-micro-monolith-architecture
the-monorepos-polylith-series
the-origin-of-complexity
understanding-polylith-through-the-lens-of-hexagonal-architecture</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blog post</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Published</p>
<p class="tableblock"><a id="leveraging-polylith"></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://medium.com/qantas-engineering-blog/leveraging-polylith-to-improve-consistency-reduce-complexity-and-increase-changeability-2031dd3d5f3d">leveraging-polylith-to-improve-consistency-reduce-complexity-and-increase-changeability</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/xlfe">Felix Barbalet</a> explains how Poilylith helps reduce complexity in an existing production system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2024</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://medium.com/@joakimtengstrand/understanding-polylith-through-the-lens-of-hexagonal-architecture-8e7c8757dab1">understanding-polylith-through-the-lens-of-hexagonal-architecture</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/tengstrand">Joakim Tengstrand</a> explains the differences between the Hexagonal architecture and Polylith.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://davidvujic.blogspot.com/2022/02/a-fresh-take-on-monorepos-in-python.html">a-fresh-take-on-monorepos-in-python</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/DavidVujic">David Vujic</a> explains what would happen if they had Polylith in the Python community.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://corfield.org/blog/2021/04/21/deps-edn-monorepo-2/">the-monorepos-polylith-series</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/seancorfield">Sean Corfield</a> describes his experience migrating a big production system to Polylith in a series of blog posts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-2023</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://itnext.io/the-origin-of-complexity-8ecb39130fc">the-origin-of-complexity</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/tengstrand">Joakim Tengstrand</a> explains the foundational concepts that Polylith is built upon.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://medium.com/@joakimtengstrand/the-polylith-architecture-1eec55c5ebce">how-polylith-came-to-life</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/tengstrand">Joakim Tengstrand</a> explains how the Polylith architecture came to life.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://medium.com/@joakimtengstrand/the-micro-monolith-architecture-d135d9cafbe">the-micro-monolith-architecture</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/tengstrand">Joakim Tengstrand</a> explains the ideas behind Micro Monolith, a predecessor to Polylith.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_high_level">high-level</h3>
<div class="paragraph">
<p>Open <a href="https://polylith.gitbook.io/polylith">conceptual, high-level</a> documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:high-level</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can list all pages in the left menu with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:high-level:
advantages-of-polylith
base
bring-it-all-together
component
current-architectures
development-project
faq
polylith-in-a-nutshell
production-systems
project
sharing-code
simplicity
testing-incrementally
tool
transitioning-to-polylith
videos
who-made-this
why-the-name-polylith
workspace</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open a specific page, for example, the <a href="https://polylith.gitbook.io/polylith/conclusion/faq">FAQ</a> page, via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:high-level:faq</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_in_japanese">in japanese</h3>
<div class="paragraph">
<p><a href="https://x.com/shinseitaro">Shinsei Taro</a> (しんせいたろう) has translated and reworked version 0.2.19 of the <code>poly</code> tool in Japanese, <a href="https://zenn.dev/shinseitaro/books/clojure-polylith">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_podcasts">podcasts</h3>
<div class="paragraph">
<p>You can open the <a href="https://podcasts.apple.com/se/podcast/s4-e21-polylith-with-joakim-james-and-furkan-part-1/id1461500416?i=1000505948894">first episode</a> of the only podcast we have with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:podcasts:polylith-with-joakim-james-and-furkan:part1</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Podcast</th>
<th class="tableblock halign-left valign-top">What</th>
<th class="tableblock halign-left valign-top">Published</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://podcasts.apple.com/se/podcast/s4-e21-polylith-with-joakim-james-and-furkan-part-1/id1461500416?i=1000505948894&amp;l=en">polylith-with-joakim-james-and-furkan:part1</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/jacekschae">Jacek Schae</a> discusses the Polylith architecture with the <a href="https://polylith.gitbook.io/polylith/conclusion/who-made-polylith">Polylith team</a> where they explain the ideas behind Polylith.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://podcasts.apple.com/se/podcast/s4-e22-polylith-with-joakim-james-and-furkan-part-2/id1461500416?i=1000507542984">polylith-with-joakim-james-and-furkan:part2</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The same people go deeper into the Polylith concepts, its benefits, and how it differs from other ways of working with code.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_python_tool">python tool</h3>
<div class="paragraph">
<p><a href="https://github.com/DavidVujic">David Vujic</a> has created <a href="https://davidvujic.github.io/python-polylith-docs">Polylith tools for Python</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:python-tool</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_slack">slack</h3>
<div class="paragraph">
<p>Reach out to the <a href="https://polylith.gitbook.io/polylith/conclusion/who-made-polylith">Polylith team</a>
in the <a href="https://clojurians.slack.com/archives/C013B7MQHJQ">#polylith</a> channel
in the Clojurians Slack:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:slack</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="videos">videos</h3>
<div class="paragraph">
<p>You can list available videos with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:videos:
a-fresh-take-on-monorepos-in-python
collaborative-learning-polylith
how-the-polylith-repo-has-evolved-over-time
polylith-in-a-nutshell
polylith–a-software-architecture-based-on-lego-like-blocks
the-last-architecture-you-will-ever-need</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Video</th>
<th class="tableblock halign-left valign-top">What</th>
<th class="tableblock halign-left valign-top">Published</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.youtube.com/watch?v=cfVzy9iPpLg">how-the-polylith-repo-has-evolved-over-time</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An animation that visualizes the evolution of the Polylith repository from its inception in 2020 to mid-2024. Generated in <a href="https://gource.io">Gource</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2024</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.youtube.com/watch?v=HU61vjZPPfQ">a-fresh-take-on-monorepos-in-python</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/DavidVujic">David Vujic</a> explains how Polylith can be used in <a href="https://en.wikipedia.org/wiki/Python_(programming_language)">Python</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.youtube.com/watch?v=_tpNKAv4fro">collaborative-learning-polylith</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sean Corfield is interviewed by the <a href="https://www.youtube.com/@losangelesclojureusersgrou5432">Los Angeles Clojure Users Group</a> about his experience with Polylith and how he uses the <code>poly</code> tool in production at <a href="https://polylith.gitbook.io/polylith/conclusion/production-systems#world-singles-networks">World Singles Network</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.youtube.com/watch?v=pebwHmibla4">the-last-architecture-you-will-ever-need</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/tengstrand">Joakim Tengstrand</a> and <a href="https://github.com/furkan3ayraktar">Furkan Bayraktar</a> try to convince people why Polylith is the last architecture they will ever need!</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.youtube.com/watch?v=Xz8slbpGvnk">polylith-in-a-nutshell</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.linkedin.com/in/james-trunk/">James Trunk</a> explains the basic concepts of the Polylith architecture.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.youtube.com/watch?v=wy4LZykQBkY">polylith–a-software-architecture-based-on-lego-like-blocks</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/tengstrand">Joakim Tengstrand</a> explains how Polylith is like building with LEGO bricks, at <a href="https://www.youtube.com/playlist?list=PLaSn8eiZ631nv68lHjZIfrSXOLIDsf726">ClojureD 2019</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_workspaces">workspaces</h3>
<div class="paragraph">
<p>List example poly workspace with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">example$ doc more:workspaces:
game-of-life
polylith
realworld
usermanager</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Workspace</th>
<th class="tableblock halign-left valign-top">What</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/tengstrand/game-of-life">game-of-life</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A tiny workspace that implements <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Game of Life</a>, created by <a href="https://github.com/tengstrand">Joakim Tengstrand</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/polyfy/polylith">polylith</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Polylith workspace, from which this <code>poly</code> tool itself is built, mainly maintained by <a href="https://github.com/tengstrand">Joakim Tengstrand</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/furkan3ayraktar/clojure-polylith-realworld-example-app/tree/master">realworld</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A full-fledged RealWorld server, built with Clojure, Polylith, and Ring, including CRUD operations, authentication, routing, pagination, and more.
Created and maintained by <a href="https://github.com/furkan3ayraktar">Furkan Bayraktar</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/seancorfield/usermanager-example/tree/polylith">usermanager</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A simple web application using Component, Ring, Compojure, and Selmer connected to a local SQLite database.
Created and maintained by <a href="https://github.com/seancorfield">Sean Corfield</a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tap">Tap</h2>
<div class="sectionbody">

</div>
</div>
<h1 id="_tap_2" class="sect0">Tap</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>We created the <code>tap</code> command to support <a href="developing-poly.html">developing poly</a>, but
you might find it an interesting way to browse the internal <a href="workspace-structure.html">workspace structure</a>.</p>
</div>
<div class="paragraph">
<p>This command opens a separate <a href="https://github.com/djblue/portal">portal</a> window.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Portal is an excellent Clojure tool that makes browsing data a joy.
Whether or not you use our <code>tap</code> command, we recommend you check out <a href="https://github.com/djblue/portal">portal</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>tap</code> command only works with the <code>poly</code> <a href="#">shell</a>.
You can invoke it in two different ways:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Via the <code>:tap</code> argument when <a href="#launching">launching a poly shell</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">poly :tap</code></pre>
</div>
</div>
</li>
<li>
<p>By running the <a href="commands.html#tap">tap</a> command from a <code>poly</code> shell:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">example$ tap</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You&#8217;ll see a separate portal window open; here, we show it placed to the right of the <code>poly</code> shell:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tap/tap-shell.png" alt="tap shell">
</div>
</div>
<div class="paragraph">
<p>Click on the <code>:worskpace</code> key to dig into the <a href="workspace-structure.html">workspace structure</a>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tap/tap-workspace.png" alt="tap workspace" width="400">
</div>
</div>
<div class="paragraph">
<p>Any time the <code>poly</code> tool invokes <a href="https://clojuredocs.org/clojure.core/tap%3E">tap&gt;</a>, you&#8217;ll see the output in the portal window.
Starting with version <code>0.2.18</code> of <code>poly</code>, we only <code>tap&gt;</code> the workspace structure to keep output to portal minimal and clean.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tools_deps">Tools.deps</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-08-03 16:36:15 UTC
</div>
</div>
</body>
</html>